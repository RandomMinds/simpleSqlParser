!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.simpleSqlParser=n()}}(function(){return function n(e,r,t){function i(o,l){if(!r[o]){if(!e[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(u)return u(o,!0);throw new Error("Cannot find module '"+o+"'")}var p=r[o]={exports:{}};e[o][0].call(p.exports,function(n){var r=e[o][1][n];return i(r?r:n)},p,p.exports,n,e,r,t)}return r[o].exports}for(var u="function"==typeof require&&require,o=0;o<t.length;o++)i(t[o]);return i}({1:[function(n,e,r){(function(n){"use strict";function e(n,e){return"undefined"==typeof e&&(e=[]),n.or(f("").map(function(){return e}))}function t(n){return n.join("")}function i(n){return n[0].push(n[1]),n[0]}function u(n){return s(n.skip(c).skip(f(",")).skip(c).many(),n.skip(c)).map(i)}function o(n){return n.replace(/^([`'"])(.*)\1$/,"$2")}var l="undefined"!=typeof window?window.Parsimmon:"undefined"!=typeof n?n.Parsimmon:null,s=l.seq,p=l.alt,a=l.regex,f=l.string,c=l.optWhitespace,m=l.whitespace,h=l.lazy,x=p(a(/(?!(FROM|WHERE|GROUP BY|ORDER BY|LIMIT|INNER|LEFT|RIGHT|JOIN|ON|VALUES|SET)\s)[a-z*][a-z0-9_]*/i),a(/`[^`\\]*(?:\\.[^`\\]*)*`/)),d=p(a(/"[^"\\]*(?:\\.[^"\\]*)*"/),a(/'[^'\\]*(?:\\.[^'\\]*)*'/)),E=s(p(a(/[a-zA-Z0-9_]+\(/),f("(")),e(h(function(){return D})).map(t),f(")")).map(t),v=s(x,f("."),x),I=p(f("+"),f("-"),f("*"),f("/"),f("&&"),f("&"),f("~"),f("||"),f("|"),f("^"),a(/XOR/i),f("<=>"),f("="),f("!="),f(">="),f(">>"),f(">"),f("<="),f("<<"),f("<"),a(/IS NULL/i),a(/IS NOT/i),a(/IS NOT NULL/i),a(/IS/i),a(/LIKE/i),a(/NOT LIKE/i),f("%"),a(/MOD/i),a(/NOT/i),a(/OR/i),a(/AND/i),a(/IN/i)),y=a(/[-]?\d+\.?\d*/),R=s(f("("),c,s(p(y,d),c,e(f(",")),c,e(p(y,d))).map(t),c,f(")")).map(t),O=s(p(v.map(function(n){return{expression:n.join(""),table:o(n[0]),column:o(n[2])}}),E.map(function(n){return{expression:n,table:null,column:null}}),x.map(function(n){return{expression:n,table:null,column:o(n)}}),d.map(function(n){return{expression:n,table:null,column:null}}),y.map(function(n){return{expression:n,table:null,column:null}}),R.map(function(n){return{expression:n,table:null,column:null}})),e(s(c,I,e(s(c,h(function(){return O}).map(function(n){return n.expression})).map(t),null)).map(t),null)).map(function(n){return null!==n[1]?(n[0]=n[0].expression,{expression:n.join(""),table:null,column:null}):n[0]}),N=s(O,e(s(c,e(a(/AS\s/i)),p(x,d)).map(function(n){var e={};return e.alias=o(n[2]),e.expression=n.join(""),e}),null)).map(function(n){var e=n[0];return e.alias=null!==n[1]?n[1].alias:null,e.expression=e.expression+(null!==n[1]?n[1].expression:""),e}),T=O.map(function(n){return n.expression}),b=s(p(v.map(t),x),e(s(c,e(a(/AS\s/i)),p(x,d)).map(function(n){return{alias:o(n[2]),expression:n.join("")}}),null)).map(function(n){var e={};return e.table=n[0],e.alias=null!==n[1]?n[1].alias:null,e.expression=n[0]+(null!==n[1]?n[1].expression:""),e}),w=s(e(s(a(/INNER|LEFT|RIGHT/i),m).map(function(n){return n[0].toLowerCase()}),null),a(/JOIN/i),c,b,c,a(/ON/i),c,O).map(function(n){var e={};return e.type=n[0]||"inner",e.table=n[3].table,e.alias=n[3].alias,e.condition={expression:n[7].expression},e}),S=O.map(function(n){return{expression:n.expression}}),j=s(O,e(s(c,a(/ASC|DESC/i)),null)).map(function(n){return{expression:n[0].expression+(null!==n[1]?n[1].join(""):""),order:null!==n[1]?n[1][1]:"ASC",table:n[0].table,column:n[0].column}}),L=s(y,e(s(c,f(","),c,y),null)).map(function(n){return null===n[1]?{from:null,nb:parseInt(n[0],10)}:{from:parseInt(n[0],10),nb:parseInt(n[1][3],10)}}),g=p(v.map(function(n){return{expression:n.join(""),column:o(n[2])}}),x.map(function(n){return{expression:n,column:o(n)}})),k=O.map(function(n){return n.expression}),A=s(g,c,f("="),c,O).map(function(n){return{target:n[0],value:n[4].expression}}),D=s(s(T,c,f(","),c).map(t).many(),T.skip(c)).map(i),U=u(N),M=u(b),q=u(O),H=u(j),P=c.then(w).skip(c).many(),C=u(g),F=u(k),B=u(A),G=s(a(/SELECT/i).skip(c).then(e(U)),a(/FROM/i).skip(c).then(e(M)),e(P),e(a(/WHERE/i).skip(c).then(e(S)),null),e(a(/GROUP BY/i).skip(c).then(e(q))),e(a(/ORDER BY/i).skip(c).then(e(H))),e(a(/LIMIT/i).skip(c).then(e(L)),null)).map(function(n){return{type:"select",select:n[0],from:n[1],join:n[2],where:n[3],group:n[4],order:n[5],limit:n[6]}}),W=s(a(/INSERT INTO/i).skip(c).then(b),c,e(s(f("("),C,f(")")).map(function(n){return n[1]})),c,a(/VALUES\s?\(/i).skip(c).then(F),f(")")).map(function(n){for(var e=[],r=Math.max(n[2].length,n[4].length),t=0;r>t;++t)e[t]={target:n[2][t]||null,value:n[4][t]||null};return{type:"insert",into:n[0],values:e}}),Y=s(a(/UPDATE/i).skip(c).then(b),c,a(/SET/i).skip(c).then(B),c,e(a(/WHERE/i).skip(c).then(e(S)),null)).map(function(n){return{type:"update",table:n[0],values:n[2],where:n[4]}}),J=s(a(/DELETE FROM/i).skip(c).then(e(M)),e(a(/WHERE/i).skip(c).then(e(S)),null)).map(function(n){return{type:"delete",from:n[0],where:n[1]}}),z=p(G,W,Y,J);r.sql2ast=function(n){return z.parse(n)},r.ast2sql=function(n){function e(n){var e="SELECT ";return e+=n.select.map(function(n){return n.expression}).join(", ")}function r(n){var e="FROM ";return e+=n.from.map(function(n){return n.expression}).join(", ")}function t(n){return n.join.map(function(n){var e="";if("inner"===n.type)e+="INNER JOIN ";else if("left"===n.type)e+="LEFT JOIN ";else{if("right"!==n.type)return"";e+="RIGHT JOIN "}return e+=n.table,null!==n.alias&&(e+=" AS "+n.alias),e+=" ON ",e+=n.condition.expression}).join(" ")}function i(n){var e="";return null!==n.where&&(e+="WHERE "+n.where.expression),e}function u(n){var e="";return n.group.length>0&&(e+="GROUP BY ",e+=n.group.map(function(n){return n.expression}).join(", ")),e}function o(n){var e="";return n.order.length>0&&(e+="ORDER BY ",e+=n.order.map(function(n){return n.expression}).join(", ")),e}function l(n){var e="";return null!==n.limit&&(e+="LIMIT ",null!==n.limit.from&&(e+=n.limit.from+", "),e+=n.limit.nb),e}function s(n){return"INSERT INTO "+n.into.expression}function p(n){var e="",r=n.values.filter(function(n){return null!==n.target});return r.length>0&&(e+="(",e+=r.map(function(n){return n.target.expression}).join(", "),e+=") "),e+="VALUES (",e+=n.values.map(function(n){return n.value}).join(", "),e+=")"}function a(n){return"UPDATE "+n.table.expression}function f(n){var e="SET ";return e+=n.values.map(function(n){return n.target.expression+" = "+n.value}).join(", ")}if("object"!=typeof n||n.status!==!0)return!1;n=n.value;var c=[];if("select"===n.type)c.push(e(n)),c.push(r(n)),c.push(t(n)),c.push(i(n)),c.push(u(n)),c.push(o(n)),c.push(l(n));else if("insert"===n.type)c.push(s(n)),c.push(p(n));else if("update"===n.type)c.push(a(n)),c.push(f(n)),c.push(i(n));else{if("delete"!==n.type)return!1;c.push("DELETE"),c.push(r(n)),c.push(i(n))}return c.filter(function(n){return""!==n}).join(" ")}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});